<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.sm.mapper.PersonMapper">
	
	
	<!-- 사원 목록 조회 -->
	<select id="empList" resultType="com.sm.domain.EmployeesVO"> 
		select * from employees
	</select>	
	<!-- 사원 목록 조회 -->
	
	
	<!-- 사원 권한 정보 조회 -->
	<select id="management" resultType="com.sm.domain.ManagementVO">
		select * from management
	</select>
	<!-- 사원 권한 정보 조회 -->
	
	
	<!-- 거래처 목록 불러오기 -->
	<select id="listAll" resultType="com.sm.domain.ClientsVO">
		select * from clients
	</select>
	<!-- 거래처 목록 불러오기 -->
	
	
	<!-- 수주 현황 목록 불러오기 -->
	<select id="orderStatusList" resultType="com.sm.domain.OrderStatusVO">
		select o.order_code, o.order_date, c.client_code, e.emp_id, prod_code, prod_name, 
			   prod_unit, o.order_deliveryDate, o.order_count, o.order_finish
		from orders o
		JOIN clients c ON c.client_code = o.client_code
		JOIN employees e ON e.emp_id = o.emp_id
		JOIN product p ON p.client_code = o.client_code
	</select>
	<!-- 수주 현황 목록 불러오기 -->
	
	
	<!-- 수주 관리 조회 -->
	<resultMap type="com.sm.domain.OrderStatusVO" id="order_ManageList">
		<result column="client_code" property="client_code"/>
		<result column="client_actname" property="client_actname"/>
		<result column="order_date" property="order_date"/>
		<result column="order_deliveryDate" property="order_deliveryDate"/>
		<result column="emp_id" property="emp_id"/>
		<result column="emp_name" property="emp_name"/>
		<result column="prod_code" property="prod_code"/>
		<result column="prod_name" property="prod_name"/>
		<result column="prod_unit" property="prod_unit"/>
		<result column="order_count" property="order_count"/>
	</resultMap>
	
	<select id="orderManageList" resultMap="order_ManageList">
		select c.client_code, c.client_actname, order_date, order_deliveryDate,
				e.emp_id, e.emp_name, p.prod_code, p.prod_name, p.prod_unit, order_count
		from orders o
		left join product p on p.prod_code = o.prod_code
		left join employees e on e.emp_id = o.emp_id
		left join clients c on c.client_code = o.client_code
	</select>
	<!-- 수주 관리 조회 -->
	
	
	
</mapper>