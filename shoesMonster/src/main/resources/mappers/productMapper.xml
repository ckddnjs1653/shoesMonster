<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.sm.mapper.ProductMapper">

	<!-- 품목관리 목록 불러오기 -->
	<select id="readProd" resultType="ProductVO">
		select * from product
	</select>
	<!-- 품목관리 목록 불러오기 -->
	
	<!-- 품목관리 검색리스트 불러오기 --> 
	<select id="readSearchProd" resultType="ProductVO">
		<bind name="prod_code" value="'%'+ prod_code +'%'"/>
		<bind name="prod_name" value="'%'+ prod_name +'%'"/>
		<bind name="prod_category" value="'%'+ prod_category +'%'"/>
		<bind name="prod_unit" value="'%'+ prod_unit +'%'"/>
		select * from product
		<where>
			<if test="prod_code != ''">
				prod_code like #{prod_code}
			</if>
			<if test="prod_name != ''">
				and prod_name like #{prod_name}
			</if>
			<if test="prod_category != ''">
				and prod_category like #{prod_category}
			</if>
			<if test="prod_unit != ''">
				and prod_unit like #{prod_unit}
			</if>
		</where>
	</select>
	<!-- 품목관리 검색리스트 불러오기 -->
	 
	<!-- 품목관리 정보 다중 입력 -->
	<insert id="prodIn">
		insert into product 
		values (#{prod_code},#{prod_name},#{prod_category},#{prod_unit},#{prod_size},
		#{prod_color},#{client_code},#{prod_price},#{prod_note})
	</insert>
	<!-- 품목관리 정보 다중 입력 -->
	
	<!--                                                                               -->
	
	<!-- 라인 목록 조회 -->
	<select id="lineList" resultType="com.sm.domain.LineVO">
		select * from line
	</select>
	<!-- 라인 목록 조회 -->
	
	<!-- 라인 검색 -->
	<select id="searchLine" resultType="com.sm.domain.LineVO">
		<bind name="line_code" value="'%' + line_code +'%'"/>
		<bind name="line_name" value="'%' + line_name +'%'"/>
		<bind name="line_place" value="'%' + line_place +'%'"/>
<!-- 		<bind name="line_use" value="'%' + line_use +'%'"/> -->
		select * from line
		<where>
			<if test="line_code != ''">
				line_code like #{line_code}
			</if>		
			<if test="line_name != ''">
				and line_name like #{line_name}
			</if>
			<if test="line_place != ''">
				and line_place like #{line_place}
			</if>
			<if test="line_use != 3">
				and line_use= #{line_use}
			</if>
		</where>
	</select>	
	<!-- 라인 검색 -->
	
	
	<!-- 창고 조회 -->
	<resultMap type="com.sm.domain.Wh_prodVO" id="whm_list">
		<result property="prod_code" column="prod_code"/>
		<result property="raw_code" column="raw_code"/>
		<result property="wh_code" column="wh_code"/>
		<result property="wh_name" column="wh_name"/>
		<result property="wh_dv" column="wh_dv"/>
		<result property="wh_addr" column="wh_addr"/>
		<result property="wh_tel" column="wh_tel"/>
		<result property="wh_use" column="wh_use"/>
		<result property="wh_note" column="wh_note"/>
	</resultMap>
	
	<select id="whlist" resultMap="whm_list">
		select wh_code, wh_name, wh_dv,w.prod_code, p.prod_name,
			   w.raw_code, r.raw_name, wh_addr, wh_tel, wh_use, wh_note 
		from warehouse w
		left join product p on p.prod_code = w.prod_code
		left join raw_material r on r.raw_code = w.raw_code
	</select>

	<!-- 창고 조회 -->
	
	
</mapper>